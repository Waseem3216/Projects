<%- include('partials/header') %>

<section class="card">
  <h2>Ingredients (Inventory)</h2>
  <table class="table">
    <thead>
      <tr><th>SKU</th><th>Name</th><th>Total Amount</th><th style="width:320px;">Actions</th></tr>
    </thead>
    <tbody>
      <% if (ingredients.length === 0) { %>
        <tr><td colspan="4" class="muted">No ingredients yet.</td></tr>
      <% } %>
      <% ingredients.forEach(it => { %>
        <tr>
          <td><%= it.sku || "(no sku)" %></td>
          <td><%= it.ingredientname %></td>
          <td><%= it.totalamount %></td>
          <td>
            <form action="/ingredients/<%= it.id %>/update" method="post" class="inline">
              <input name="sku" placeholder="SKU" value="<%= it.sku || '' %>" />
              <input name="ingredientname" placeholder="Rename" value="<%= it.ingredientname %>" />
              <input name="totalamount" type="number" step="0.01" min="0" value="<%= it.totalamount %>" />
              <button type="submit">Update</button>
            </form>
            <form action="/ingredients/<%= it.id %>/delete" method="post" class="inline">
              <button type="submit" class="danger">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</section>

<section class="card">
  <h3>Add New Ingredient</h3>
  <form action="/ingredients/new" method="post" class="form-grid">
    <label>SKU (optional)
      <input name="sku" placeholder="e.g., MILK-001" />
    </label>
    <label>Name
      <input name="ingredientname" placeholder="e.g., Milk (ml)" required />
    </label>
    <label>Total Amount
      <input name="totalamount" type="number" step="0.01" min="0" value="0" required />
    </label>
    <button type="submit">Add</button>
  </form>
</section>

<%- include('partials/footer') %>
